<div class="product-wrap">
  <div class="container">
    <div class="row">
      <div class="col-6">
        <div class="product-images">
          <section class="slider">
            <div class="slider__flex">
              <div class="slider__col">
                <div class="slider__prev">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="25px"
                    height="25px"
                    viewBox="0 0 24 24"
                    fill="none"
                    color="currentColor"
                  >
                    <path
                      d="M6 12h12.5m0 0l-6-6m6 6l-6 6"
                      stroke="black"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></path>
                  </svg>
                </div>
                <div class="slider__thumbs">
                  <div class="swiper-container">
                    <div class="swiper-wrapper">
                      {% for image in product.images %}
                        <div class="swiper-slide">
                          <div class="slider__image">
                            <img
                              src="{{ image.src | image_url }}"
                              alt="{{ image.alt }}"
                              loading="lazy"
                              width="{{ image.width }}"
                              height="{{ image.height }}"
                            >
                          </div>
                        </div>
                      {% endfor %}
                    </div>
                  </div>
                </div>
                <div class="slider__next">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="25px"
                    height="25px"
                    viewBox="0 0 24 24"
                    fill="none"
                    color="currentColor"
                  >
                    <path
                      d="M6 12h12.5m0 0l-6-6m6 6l-6 6"
                      stroke="black"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></path>
                  </svg>
                </div>
              </div>
              <div class="slider__images">
                <div class="swiper-container">
                  <div class="swiper-wrapper">
                    {% for image in product.images %}
                      <div class="swiper-slide">
                        <div class="slider__image">
                          <img
                            src="{{ image.src | image_url }}"
                            alt="{{ image.alt }}"
                            loading="lazy"
                            width="{{ image.width }}"
                            height="{{ image.height }}"
                          >
                        </div>
                      </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
      <div class="col-6">
        <div class="product-details-wrap">
          {% form 'product', product %}
            {% for block in section.blocks %}
              {% case block.type %}
                {% when '@app' %}
                  {% render 'app', product: product %}
                {% when 'product_title' %}
                  <div class="product-title">
                    <h3 class="h3 uppercase">{{ product.title }}</h3>
                  </div>
                {% when 'product_price' %}
                  <div class="product-price-wrap">
                    <div class="price">{{ product.price | money_with_currency }}</div>
                    <div class="discounted-price">
                      <div class="compare-at-price">{{ product.compare_at_price | money_with_currency }}</div>
                      <div class="product-discount">
                        {% assign difference = product.compare_at_price | minus: product.price %}
                        {% assign discount = difference | times: 100 | divided_by: product.compare_at_price %}
                        -{{ discount }}%
                      </div>
                    </div>
                  </div>
                {% when 'product_description' %}
                  <ul class="product-info">
                    <li class="product product-description">
                      <p>
                        {{ product.description }}
                      </p>
                    </li>
                {% when 'product_varients' %}
                  {% for option in product.options_with_values %}
                    {% case option.name %}
                      {% when 'Color' %}
                        <li class="product image-color-swatch">
                          <div class="product-page-info-title p">
                            <p>Select {{ option.name }}</p>
                          </div>
                          <div class="image-color-content">
                            <ul class="image-color-variant-select-wrap">
                              {% for value in option.values %}
                                <li>
                                  <a
                                    class="color-image-variant-link"
                                    href="#"
                                    title="{{value}}"
                                  >
                                    <input
                                      id="{{ option.name }}-{{ value }}"
                                      name="{{ option.name }}"
                                      type="radio"
                                      value="{{value}}"
                                      class="color-image-radio"
                                      data-color="{{value}}"
                                      name="{{value}}"
                                    >
                                    <span
                                      class="color-image-variant color-image-variant--rounded"
                                      style="background-color: #00c12b"
                                    ></span>
                                  </a>
                                </li>
                              {% endfor %}
                            </ul>
                          </div>
                        </li>
                      {% when 'Size' %}
                        <li class="product size-swatch">
                          <div class="product-page-info-title p">
                            <p>Choose {{ option.name }}</p>
                          </div>
                          <div class="size-content">
                            <ul class="size-variant-listing-wrap">
                              {% for value in option.values %}
                                <li>
                                  <a
                                    class="size-variant-link"
                                    href="#"
                                    title="{{ value }}"
                                  >
                                    <input
                                      id="{{ option.name }}-{{ value }}"
                                      name="{{ option.name }}"
                                      type="radio"
                                      value="{{ value }}"
                                      class="size-radio"
                                      data-size="{{ value }}"
                                    >
                                    <span class="size-variant size-variant--rounded">{{ value }}</span>
                                  </a>
                                </li>
                              {% endfor %}
                            </ul>
                          </div>
                        </li>
                      {% when 'Style' %}
                        <li class="product style-swatch">
                          <div class="product-page-info-title p">
                            <p>Choose {{ option.name }}</p>
                          </div>
                          <div class="style-content">
                            <ul class="style-variant-listing-wrap">
                              {% for value in option.values %}
                                <li>
                                  <a
                                    class="style-variant-link"
                                    href="#"
                                    title="{{ value }}"
                                  >
                                    <input
                                      id="{{ option.name }}-{{ value }}"
                                      name="{{ option.name }}"
                                      type="radio"
                                      value="{{ value }}"
                                      class="style-radio"
                                      data-size="{{ value }}"
                                    >
                                    <span class="style-variant style-variant--rounded">{{ value }}</span>
                                  </a>
                                </li>
                              {% endfor %}
                            </ul>
                          </div>
                        </li>
                    {% endcase %}
                  {% endfor %}
                  <li class="product produt-page-actions">
                    <div class="product-actions-wrap">
                      <div class="quantity-selector">
                        <button class="decrease-btn">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="20"
                            height="20"
                            viewBox="0 0 20 20"
                            fill="none"
                          >
                            <path
                              d="M17.8125 10C17.8125 10.2486 17.7137 10.4871 17.5379 10.6629C17.3621 10.8387 17.1236 10.9375 16.875 10.9375H3.125C2.87636 10.9375 2.6379 10.8387 2.46209 10.6629C2.28627 10.4871 2.1875 10.2486 2.1875 10C2.1875 9.75136 2.28627 9.5129 2.46209 9.33709C2.6379 9.16127 2.87636 9.0625 3.125 9.0625H16.875C17.1236 9.0625 17.3621 9.16127 17.5379 9.33709C17.7137 9.5129 17.8125 9.75136 17.8125 10Z"
                              fill="black"
                            ></path>
                          </svg>
                        </button>
                        <input type="text" class="quantity-input" value="1" name="quantity" min="1" id="quantity">
                        <button class="increase-btn">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="20"
                            height="20"
                            viewBox="0 0 20 20"
                            fill="none"
                          >
                            <path
                              d="M17.8125 10C17.8125 10.2486 17.7137 10.4871 17.5379 10.6629C17.3621 10.8387 17.1236 10.9375 16.875 10.9375H10.9375V16.875C10.9375 17.1236 10.8387 17.3621 10.6629 17.5379C10.4871 17.7137 10.2486 17.8125 10 17.8125C9.75136 17.8125 9.5129 17.7137 9.33709 17.5379C9.16127 17.3621 9.0625 17.1236 9.0625 16.875V10.9375H3.125C2.87636 10.9375 2.6379 10.8387 2.46209 10.6629C2.28627 10.4871 2.1875 10.2486 2.1875 10C2.1875 9.75136 2.28627 9.5129 2.46209 9.33709C2.6379 9.16127 2.87636 9.0625 3.125 9.0625H9.0625V3.125C9.0625 2.87636 9.16127 2.6379 9.33709 2.46209C9.5129 2.28627 9.75136 2.1875 10 2.1875C10.2486 2.1875 10.4871 2.28627 10.6629 2.46209C10.8387 2.6379 10.9375 2.87636 10.9375 3.125V9.0625H16.875C17.1236 9.0625 17.3621 9.16127 17.5379 9.33709C17.7137 9.5129 17.8125 9.75136 17.8125 10Z"
                              fill="black"
                            ></path>
                          </svg>
                        </button>
                      </div>
                      <input type="hidden" id="matched-id-input" name="id" value="">
                      {% if product.available %}
                        <input type="submit" class="add-to-cart-btn primary-button" name="Shop Now" value="Add to cart">
                      {% else %}
                        <input type="number" value="" class="product_varient">
                        <input
                          type="submit"
                          class="add-to-cart-btn primary-button"
                          name="Shop Now"
                          value="Add to cart"
                          disabled
                        >
                      {% endif %}
                    </div>
                  </li>
                  </ul>
              {% endcase %}
            {% endfor %}
          {% endform %}
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  // Initial array of objects
  const products = {{ product.variants | json }}
  console.log(products)
  
  // Function to get selected radio button value
const getSelectedValue = (name) => {
  const radios = document.getElementsByName(name);
  for (const radio of radios) {
      if (radio.checked) {
          return radio.value;
      }
  }
  return null;
};

// Function to match options with corresponding ID
const matchOptionsWithID = () => {
  const selectedColor = getSelectedValue('color');
  const selectedSize = getSelectedValue('size');
  const selectedStyle = getSelectedValue('style');

  const matchedProduct = products.find(product => 
      product.option1 === selectedColor &&
      product.option2 === selectedSize &&
      product.option3 === selectedStyle
  );

  const matchedID = matchedProduct ? matchedProduct.id : 'None';
  document.getElementById('matched-id').textContent = `Matched ID: ${matchedID}`;

  // Set the value of hidden input to matched ID
  document.getElementById('matched-id-input').value = matchedID;
};

// Add event listeners to radio buttons
const radioButtons = document.querySelectorAll('input[type=radio]');
radioButtons.forEach(button => {
  button.addEventListener('click', matchOptionsWithID);
});

// Call matchOptionsWithID initially to set the initial matched ID
matchOptionsWithID();
</script>
{% schema %}
{
  "name": "main-product",
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "product_title",
      "name": "Product Title"
    },
    {
      "type": "product_price",
      "name": "Product Price"
    },
    {
      "type": "product_description",
      "name": "Product Description"
    },
    {
      "type": "product_varients",
      "name": "Product Varients"
    }
  ]
}
{% endschema %}
